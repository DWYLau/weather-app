(()=>{"use strict";const t="226dbf12f6c9f3e021556ea66e7c95c9";async function e(e){const a=await fetch(e,{mode:"cors"}),i=await a.json();if(i.length){const{name:e,country:a,lat:d,lon:r}=i[0];x(e,a),o.style.marginTop="0rem",y.style.display="none",n(d,r,t)}else C()}async function n(t,e,n){const o=`https://api.openweathermap.org/data/2.5/forecast/?lat=${t}&lon=${e}&appid=${n}&units=metric`,a=await fetch(o,{mode:"cors"});!function(t){var e,n;n=t.list[0].dt_txt,d.textContent=new Date(n).toLocaleDateString("en-GB",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),e=t,c.textContent=Math.round(parseFloat(e.list[0].main.temp).toFixed(2))+"°c",m.textContent=Math.round(parseFloat(e.list[0].main.feels_like).toFixed(2))+"°c",p.textContent=parseFloat(e.list[0].pop).toFixed(2)+"%",l.textContent=parseInt(e.list[0].main.humidity)+"%",s.textContent=Math.round(parseFloat(e.list[0].wind.speed).toFixed(2))+"m/s",u.textContent=Math.round(parseFloat(e.list[0].wind.gust).toFixed(2))+"m/s",h.textContent=function(t){let e=t.split(" ");for(let t=0;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join(" ")}(e.list[0].weather[0].description),g.src=E(e.list[0].weather[0].main);let o=[],a=t.list.filter((t=>{const e=new Date(t.dt_txt).getDate();if(!o.includes(e))return o.push(e)}));a.splice(0,1),w.innerHTML="",a.forEach((t=>{!function(t){let e=document.createElement("li");e.classList.add("card"),w.appendChild(e);let n=document.createElement("h3"),o=document.createElement("img"),a=document.createElement("h4"),i=document.createElement("h4"),d=document.createElement("h4");n.textContent=new Date(t.dt_txt).toLocaleDateString("en-GB",{weekday:"long",month:"short",day:"numeric"}),o.src=E(t.weather[0].main),a.textContent="Temperature: "+Math.round(parseFloat(t.main.temp).toFixed(2))+"°c",i.textContent="Humidity: "+parseInt(t.main.humidity)+"%",d.textContent="Wind Speed: "+Math.round(parseFloat(t.wind.speed).toFixed(2))+"m/s",e.appendChild(n),e.appendChild(o),e.appendChild(a),e.appendChild(i),e.appendChild(d)}(t)}))}(await a.json())}const o=document.getElementById("location"),a=document.getElementById("search"),i=document.getElementById("city"),d=document.getElementById("date"),r=document.getElementById("country"),c=document.getElementById("temp"),m=document.getElementById("feels-like"),p=document.getElementById("precipitation"),l=document.getElementById("humidity"),s=document.getElementById("wind-speed"),u=document.getElementById("gust-speed"),h=document.getElementById("description"),g=document.getElementById("weather-image"),w=document.querySelector(".weather-cards"),y=document.querySelector(".error");function x(t,e){i.textContent=t,r.textContent=e}function E(t){return"Clear"===t?"https://openweathermap.org/img/wn/01d@2x.png":"Rain"===t?"https://openweathermap.org/img/wn/10d@2x.png":"Drizle"===t?"https://openweathermap.org/img/wn/09d@2x.png":"Thunderstorm"===t?"https://openweathermap.org/img/wn/11d@2x.png":"Snow"===t?"https://openweathermap.org/img/wn/13d@2x.png":"Atmosphere"===t?"https://openweathermap.org/img/wn/50d@2x.png":"Clouds"===t?"https://openweathermap.org/img/wn/02d@2x.png":void 0}function f(){y.textContent="Please request permission.",C()}function C(){o.style.marginTop="2.1rem",y.style.display="block"}document.getElementById("user-coords").addEventListener("click",(function(){navigator.geolocation.getCurrentPosition((e=>{const{latitude:o,longitude:a}=e.coords;fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${o}&lon=${a}&limit=1&appid=${t}`).then((t=>t.json())).then((e=>{const{name:o,country:a,lat:i,lon:d}=e[0];x(o,a),n(i,d,t)})).catch((()=>{C()}))}),(t=>{t.code===t.PERMISSION_DENIED&&f()}))})),a.addEventListener("click",(function(){const n=o.value.trim();n&&e(`https://api.openweathermap.org/geo/1.0/direct?q=${n}&limit=5&appid=${t}`)})),e(`https://api.openweathermap.org/geo/1.0/direct?q=Yokohama&limit=5&appid=${t}`)})();